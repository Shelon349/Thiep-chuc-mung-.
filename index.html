<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªùi Ch√∫c T·ª´ B√≠ch Ng·ªçc</title>
    <style>
        /* PH·∫¶N 1: CSS (Thi·∫øt k·∫ø & Hi·ªáu ·ª©ng Hoa R∆°i) */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f7f3e8; /* M√†u n·ªÅn kem nh·∫°t */
            font-family: 'Times New Roman', serif;
            color: #4b4b4b;
            text-align: center;
            overflow: hidden; /* NgƒÉn cu·ªôn trang */
            position: relative; /* Quan tr·ªçng cho hi·ªáu ·ª©ng hoa r∆°i */
        }

        #app {
            width: 90%;
            max-width: 600px;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            background-color: #ffffff;
            position: relative;
            cursor: pointer;
            transition: all 0.5s ease;
            z-index: 10; /* ƒê·∫£m b·∫£o n·ªôi dung n·∫±m tr√™n hoa r∆°i */
        }

        /* ·∫®n/Hi·ªán n·ªôi dung */
        .content {
            display: none;
            opacity: 0;
            transition: opacity 1s ease;
        }
        .content.active {
            display: block;
            opacity: 1;
        }

        /* Trang Ch√†o M·ª´ng (Step 1) */
        #welcome-screen h1 {
            color: #c08497; /* M√†u h·ªìng c·ªï ƒëi·ªÉn */
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        #welcome-screen p {
            font-style: italic;
            font-size: 1.1em;
            color: #9c9c9c;
        }
        .start-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #c08497;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .start-btn:hover {
            background-color: #a36f7e;
        }

        /* Trang L·ªùi Ch√∫c (Step 2 & 3) */
        .message-card {
            padding: 20px;
            margin-bottom: 15px;
            border: 1px dashed #c08497;
            border-radius: 10px;
            text-align: left;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1s ease, transform 1s ease;
        }
        .message-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .message-card h2 {
            color: #d15f7a;
            margin-top: 0;
            border-bottom: 2px solid #f0b5c5;
            padding-bottom: 5px;
            font-size: 1.5em;
        }
        .message-card p {
            font-size: 1.1em;
            line-height: 1.6;
        }

        .signature {
            margin-top: 30px;
            font-style: italic;
            font-size: 1.2em;
            color: #c08497;
        }

        /* CSS cho hi·ªáu ·ª©ng hoa r∆°i */
        .petal {
            position: absolute;
            background-color: #ffb6c1; /* M√†u h·ªìng c√°nh hoa */
            width: 15px;
            height: 15px;
            border-radius: 50%; /* H√¨nh tr√≤n */
            opacity: 0;
            pointer-events: none; /* Kh√¥ng c·∫£n tr·ªü click */
            animation: fall linear infinite;
            filter: blur(1px); /* L√†m m·ªù nh·∫π */
            z-index: 1; /* N·∫±m d∆∞·ªõi n·ªôi dung ch√≠nh */
        }

        /* T·∫°o h√¨nh d·∫°ng c√°nh hoa b·∫±ng pseudo-elements */
        .petal::before, .petal::after {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #ffb6c1;
        }
        .petal::before {
            top: -5px;
            left: -5px;
        }
        .petal::after {
            top: -5px;
            right: -5px;
        }

        @keyframes fall {
            0% {
                transform: translate(var(--x-start), -10vh) rotateZ(0deg) scale(0.8);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            100% {
                transform: translate(var(--x-end), 100vh) rotateZ(720deg) scale(1.2);
                opacity: 0;
            }
        }
    </style>
</head>
<body>

    <audio id="background-music" loop>
        <source src="canon-in-d.mp3" type="audio/mpeg">
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ ph·∫ßn t·ª≠ audio.
    </audio>

    <div id="app">

        <div id="welcome-screen" class="content active">
            <h1>üíå L·ªùi Ch√∫c ƒê·∫∑c Bi·ªát T·ª´ B√≠ch Ng·ªçc</h1>
            <p>Nh·∫•n "M·ªü Th∆∞" ƒë·ªÉ kh√°m ph√° ƒëi·ªÅu b·∫•t ng·ªù!</p>
            <button class="start-btn" onclick="nextStep()">M·ªü Th∆∞</button>
        </div>

        <div id="message1" class="content">
            <div class="message-card">
                <h2>üíê G·ª≠i hai ng∆∞·ªùi b·∫°n th√¢n y√™u c·ªßa t√¥i,</h2>
                <p>
                    **L·ªùi ch√∫c ƒë·∫ßu ti√™n** n√†y xin g·ª≠i t·ªõi c·∫£ hai b·∫°n! Ch√∫c c·∫£ hai lu√¥n r·∫°ng r·ª°, xinh ƒë·∫πp v√† tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng t√≠ch c·ª±c. Hy v·ªçng m·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn v·ªõi hai b·∫°n, x·ª©ng ƒë√°ng v·ªõi s·ª± t·ª≠ t·∫ø v√† n·ªó l·ª±c c·ªßa c·∫£ hai.
                </p>
            </div>
            <p class="click-text" style="color:#c08497; font-weight: bold;" onclick="showNextMessage(2)">ƒê·ªçc l·ªùi ch√∫c ti·∫øp theo (Click)</p>
        </div>

        <div id="message2" class="content">
            <div class="message-card">
                <h2>‚ú® G·ª≠i hai ng∆∞·ªùi b·∫°n tuy·ªát v·ªùi nh·∫•t,</h2>
                <p>
                    M√¨nh r·∫•t vui v√¨ c√≥ hai ng∆∞·ªùi b·∫°n tuy·ªát v·ªùi nh∆∞ c√°c b·∫°n. Ch√∫c hai b·∫°n lu√¥n gi·ªØ ƒë∆∞·ª£c n·ª• c∆∞·ªùi t·ªèa n·∫Øng v√† ƒë·∫°t ƒë∆∞·ª£c m·ªçi m·ª•c ti√™u trong c√¥ng vi·ªác v√† cu·ªôc s·ªëng. Mong t√¨nh b·∫°n c·ªßa ch√∫ng ta s·∫Ω lu√¥n b·ªÅn ch·∫∑t nh√©!
                </p>
            </div>
            <p class="click-text" style="color:#c08497; font-weight: bold;" onclick="showNextMessage(3)">L·ªùi k·∫øt (Click)</p>
        </div>

        <div id="final-step" class="content">
             <div class="message-card visible" style="text-align: center;">
                <h2 style="border: none;">Xin ch√¢n th√†nh c·∫£m ∆°n! ‚ù§Ô∏è</h2>
                <p>Mong r·∫±ng nh·ªØng l·ªùi ch√∫c n√†y s·∫Ω mang l·∫°i ni·ªÅm vui cho c·∫£ hai ng∆∞·ªùi b·∫°n.</p>
             </div>
             <p class="signature">Th∆∞∆°ng m·∫øn,<br>**Tr∆∞∆°ng Th·ªã B√≠ch Ng·ªçc**</p>
        </div>

    </div>

    <script>
        // PH·∫¶N 2: JAVASCRIPT (Logic)
        let currentStep = 1;
        
        // L·∫•y ph·∫ßn t·ª≠ audio
        const music = document.getElementById('background-music');

        function nextStep() {
            // T·ª∞ ƒê·ªòNG PH√ÅT NH·∫†C KHI NG∆Ø·ªúI D√ôNG B·∫§M 'M·ªû TH∆Ø'
            if (currentStep === 1) {
                music.volume = 0.5; // ƒê·∫∑t √¢m l∆∞·ª£ng v·ª´a ph·∫£i (0.0 ƒë·∫øn 1.0)
                music.play().catch(error => {
                    console.log("T·ª± ƒë·ªông ph√°t nh·∫°c b·ªã ch·∫∑n:", error);
                });
            }

            const currentElement = document.querySelector('.content.active');
            if (currentElement) {
                currentElement.classList.remove('active');
            }

            if (currentStep === 1) {
                document.getElementById('message1').classList.add('active');
                setTimeout(() => {
                    document.querySelector('#message1 .message-card').classList.add('visible');
                }, 100);
                currentStep = 2;
            } else if (currentStep === 2) {
                document.getElementById('message1').classList.remove('active');
                document.getElementById('message2').classList.add('active');
                setTimeout(() => {
                    document.querySelector('#message2 .message-card').classList.add('visible');
                }, 100);
                currentStep = 3;
            } else if (currentStep === 3) {
                document.getElementById('message2').classList.remove('active');
                document.getElementById('final-step').classList.add('active');
                currentStep = 4;
            }
        }

        function showNextMessage(step) {
            if (step === 2) {
                document.querySelector('#message1 .click-text').style.display = 'none';
                nextStep();
            } else if (step === 3) {
                document.querySelector('#message2 .click-text').style.display = 'none';
                nextStep();
            }
        }

        // PH·∫¶N 3: JAVASCRIPT cho Hi·ªáu ·ª©ng Hoa R∆°i
        const numberOfPetals = 30; // S·ªë l∆∞·ª£ng c√°nh hoa
        for (let i = 0; i < numberOfPetals; i++) {
            createPetal();
        }

        function createPetal() {
            const petal = document.createElement('div');
            petal.classList.add('petal'); // Ho·∫∑c 'heart-petal' n·∫øu b·∫°n mu·ªën h√¨nh tr√°i tim
            document.body.appendChild(petal);

            const startX = Math.random() * window.innerWidth;
            const endX = startX + (Math.random() - 0.5) * 200; // R∆°i l·ªách tr√°i/ph·∫£i m·ªôt ch√∫t
            const duration = Math.random() * 10 + 10; // Th·ªùi gian r∆°i t·ª´ 10s ƒë·∫øn 20s
            const delay = Math.random() * 15; // ƒê·ªô tr·ªÖ ƒë·ªÉ c√°c c√°nh hoa kh√¥ng r∆°i c√πng l√∫c

            petal.style.left = `${startX}px`;
            petal.style.animationDuration = `${duration}s`;
            petal.style.animationDelay = `${delay}s`;
            petal.style.setProperty('--x-start', '0px');
            petal.style.setProperty('--x-end', `${endX - startX}px`);

            // X√≥a c√°nh hoa sau khi r∆°i ƒë·ªÉ tr√°nh tr√†n DOM v√† t·∫°o l·∫°i
            petal.addEventListener('animationend', () => {
                petal.remove();
                createPetal(); // T·∫°o c√°nh hoa m·ªõi
            });
        }

    </script>
</body>
</html>
